{% extends 'base.html' %}
{% block body %}

<div class="container mt-5">
    {% for post in post %}
       <div class="card" style="width: 30rem;">
           <div class="row">&nbsp;&nbsp;&nbsp;&nbsp;
               <div>
                   <img style="height: 60px; width: 60px;" class="rounded-circle" src="{{ post.author.profile.image.url }}" alt="image not found ">
               </div>&nbsp;
               <div>
                   <h4 class="card-text">{{ post.author }}</h4>
                   <p>{{ post.date_created|date:"F d, Y" }}</p>
               </div>
           </div>
           <hr>
                <div class="card-body">
                   <h2><a class="card-text" href="{% url 'detail' post.id %}">{{ post.title }}</a></h2>
<!--                   <p class="card-text">{{ post.content }}</p>-->
                </div>
                <img src="{{ post.image.url }}" class="card-img-top" alt="image not found">
           <br>

           <div>
              <form action="{% url 'like' %}" method="POST">
                    {% csrf_token %}
                    {% if user.is_authenticated %}
                        <input type="hidden" name="post_id" value="{{ post.id }}">
                        {% if user not in post.liked.all %}
                            <button class="btn btn-primary" type="submit">Like</button>
                        {% else %}
                            <button class="btn btn-danger" type="submit">Unlike</button>
                        {% endif %}
                        <strong>{{ post.liked.all.count }} likes</strong>
                    {% else %}
                        <strong>{{ post.liked.all.count }} likes</strong>
                    {% endif %}
                </form>
               <br>


               <div>
                    {% if user.is_authenticated %}
                       <form action="{% url 'comment' %}" method="POST">
                           {% csrf_token %}
                           <input type="text" name="body" placeholder="Enter comment">
                           <input type="hidden" name="post_id" value="{{ post.id }}">
                           <input type="submit" value="Submit">&nbsp;
                       </form>
                        <strong>{{post.num_comments}} comments</strong>
                   {% else %}
                        <strong>{{post.num_comments}} comments</strong>
                   {% endif %}
               </div>

               <div>
                   <a href="{% url 'shared_post' post.id %}">Share</a>
               </div>

           </div>
<!--            <div class="col-6" style="text-align: right;">-->

<!--                      {% if is_paginated %}-->
<!--                        {% if page_obj.has_previous %}-->
<!--&lt;!&ndash;                          <a class="btn btn-outline-info mb-4" href="?page=1">First</a>&ndash;&gt;-->
<!--                          <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Prev</a>-->
<!--                        {% endif %}-->

<!--                        {% for num in page_obj.paginator.page_range %}-->
<!--                          {% if page_obj.number == num %}-->
<!--                            <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>-->
<!--                          {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}-->
<!--                          <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>-->

<!--                          {% endif %}-->
<!--                        {% endfor %}-->
<!--                        {% if page_obj.has_next %}-->
<!--                          <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Next</a>-->
<!--&lt;!&ndash;                          <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>&ndash;&gt;-->
<!--                        {% endif %}-->
<!--                      ..of <p class="btn btn-outline-info mb-4">{{ page_obj.paginator.num_pages }}</p>-->
<!--                      {% endif %}-->
<!--                    </div>-->
       </div>
    <br>

    {% endfor %}
</div>


{% endblock %}